<!DOCTYPE html>
<html>
<head>
	<title>Questions Page</title>
	<style>
		body{
			margin: 0;
			padding: 0;
			background-color: #fef7f7;
		}
		#logo{
        margin-top: -7%;
        margin-left: 3.4%;
        width: 25vw;
		}
		#intro, 
		#location, 
		#home-type,
		#roommate-gender, 
		#roommate-sexuality, 
		#ageOfRoomate, 
		#beds, 
		#bathrooms, 
		#rent, 
		#bio{
			margin-left: 34%;
		}
		p{
			font-family: "Avenir";
			font-size: 2.2em;
			margin-left: 34%;
		}
		
		.form{
			margin-left: 4%;
			padding-top: 10%;
			width: 34%;
			height: 25vh;
			margin-top: 10%;
			padding-left: 20%;
		}
		label, input, select{
			font-family: "Avenir";
			font-size: 2.2em;
		}
		label{

		}
		/*label{
			justify-content: center;
			padding-left: 20%;
		}*/
		input{
			width: 90%;
			color: black;
        	background-color: transparent;
        	font-family: Avenir;
        	padding: 10px;
        	margin: 10px;;
       		width: 25vw;
        	border-bottom: 0.1em solid;
        	border-top: none;
       		border-left: none;
        	border-right: none;
		}
	</style>
	<script>
		// Array of question IDs
		const questions = ["intro", "location", "home-type", "roommate-gender", "roommate-sexuality", "ageOfRoomate", "beds", "bathrooms", "rent", "bio"];
		// Index of current question
		let currentQuestion = 0;
		
		// Function to show the current question and hide all others
		function showCurrentQuestion() {
			for (let i = 0; i < questions.length; i++) {
				const question = document.getElementById(questions[i]);
				if (i === currentQuestion) {
					question.style.display = "block";
				} else {
					question.style.display = "none";
				}
			}
		}
		
		// Function to move to the next question and show it
		function nextQuestion() {
			currentQuestion++;
			if (currentQuestion >= questions.length) {
				// End of questions, show submit button
				document.getElementById("next").style.display = "none";
				document.getElementById("submit").style.display = "block";
			} else {
				showCurrentQuestion();
			}
		}
	</script>
</head>
<body>
	<img id = "logo" src="../images/rooMe.png">
	<form name="questions-form" method="post" id="form">
		<p id="intro" class="question">Now, answer some simple questions.</p>
		<div id="location" style="display:none;" class="question">
			<label for="location-input">Location</label>
			<input type="text" id="location-input" name="location"/>
		</div>
		
		<div id="home-type" style="display:none;" class="question">
			<label for="home-type-input">Home Type:</label>
			<select id="home-type-input" name="home-type">
				<option value="apartment">Apartment</option>
				<option value="townhome">Townhome</option>
				<option value="house">House</option>
				<option value="No preference">No preference</option>
			</select>
		</div>
		
		<div id="roommate-gender" style="display:none;" class="question">
			<label for="roommate-gender-input">Roommate Gender:</label>
			<select id="roommate-gender-input" name="roommate-gender">
				<option value="Male">Male</option>
				<option value="Female">Female</option>
				<option value="No Preference">No Preference</option>
			</select>
		</div>
		
		<div id="roommate-sexuality" style="display:none;" class="question">
		<label for="roommate-sexuality">Roommate Sexuality:</label>
		<select id="roommate-sexuality" name="roommate-sexuality">
			<option value="Straight">Straight</option>
			<option value="Gay">Gay</option>
			<option value="Lesbian">Lesbian</option>
			<option value="Bisexual">Bisexual</option>
			<option value="No Preference">No Preference</option>
		</select>
		</div>

		<div id="ageOfRoomate" style="display:none;" class="question">
		<label for="ageOfRoomate">Roomates Age:</label>
       <select id="ageOfRoomate" name="ageOfRoomate">
           <option value="18-25">18-25</option>
           <option value="25-30">25-30</option>
           <option value="30-35">30-35</option>
           <option value="35-40">35-40</option>
           <option value="40-45">40-45</option>
           <option value="45-50">45-50</option>
           <option value="50-55">50-55</option>
           <option value="55-60">55-60</option>
           <option value="60-65">60-65</option>
           <option value="65-70">65-70</option>
           <option value="70-75">70-75</option>
           <option value="75-80">75-80</option>
           <option value="80-85">80-85</option>
           <option value="85-90">85-90</option>
           <option value="90-95">90-95</option>
           <option value="95-100">95-100</option>
           <option value="No preference">No preference</option>
          
       </select>
	</div>
	
	<div id="beds" style="display:none;" class="question">
	<label for="beds">Bedrooms:</label>
	<select id="beds" name="beds">
		<option value="1-2">1-2</option>
		<option value="2-3">2-3</option>
		<option value="3-4">3-4</option>
		<option value="4-5">4-5</option>
		<option value="No preference">No preference</option>
	</select>
	</div>
	
		<div id="bathrooms" style="display:none;" class="question">
		<label for="bathrooms">Bathrooms:</label>
		<select id="bathrooms" name="bathrooms">
			<option value="1-2">1-2</option>
			<option value="2-3">2-3</option>
			<option value="3-4">3-4</option>
			<option value="4-5">4-5</option> 
			<option value="No preference">No preference</option>

		</select>
	</div>
	<div id="rent" style="display:none;" class="question">

		<label for="rent">Rent:</label>
		<select id="rent" name="rent">
			<option value="500-1000">500-1000</option>
			<option value="1000-2000">1000-2000</option>
			<option value="2000-3000">2000-3000</option>
			<option value="3000-4000">3000-4000</option>
			<option value="4000-5000">4000-5000</option>
			<option value="5000-6000">5000-6000</option>
			<option value="6000-7000">6000-7000</option>
			<option value="7000-8000">7000-8000</option>
			<option value="8000-9000">8000-9000</option>
			<option value="9000-10000">9000-10000</option>
			<option value="No preference">No preference</option>
			</select>
		</div>
		<div id="bio" style="display:none;" class="question">
			<p>Share a little bit about yourself!</p>
			<textarea rows="8" cols="100" id = "biotext">
			</textarea>
		</div>
		<input type="button" id="next" value="Next" onclick="nextQuestion()">
		<input type="submit" id="submit" value="Submit" formaction="ViewProfile.html" style="display:none;">

</form>
</body>
<script type="module">
	import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
	import { getDatabase, set, update, ref } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js";
	import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-auth.js";
	
  
	const firebaseConfig = {
	  apiKey: "AIzaSyClqbgmtcPuED7LE3-2XXSooypjXiHQj38",
	  authDomain: "roome-5bfa9.firebaseapp.com",
	  databaseURL: "https://roome-5bfa9-default-rtdb.firebaseio.com",
	  projectId: "roome-5bfa9",
	  storageBucket: "roome-5bfa9.appspot.com",
	  messagingSenderId: "564378590257",
	  appId: "1:564378590257:web:6e18a1d7269d83af318910"
	};
  
  
	const app = initializeApp(firebaseConfig);
	const db =  getDatabase(app); 
	const auth = getAuth();
  
	submit.addEventListener('click', (e) => {
		var typehome = document.getElementById("hometype").value;
		var genderMate = document.getElementById("roommategender").value;
		var sexualityMate = document.getElementById("roommatesexuality").value;
		var ageMate = document.getElementById("ageOfRoomate").value;
		var bed = document.getElementById("beds").value;
		var bath = document.getElementById("bathrooms").value;
		var rent = document.getElementById("rent").value;
		var bio = document.getElementById("biotext").value;

		const user = auth.currentUser;
		if (user !== null) {
			const uid = user.uid;
			update(ref(db, "Users/"+ user.uid),{
				typehome: typehome,
				genderMate: genderMate,
				sexualityMate: sexualityMate,
				ageMate: ageMate,
				bed: bed,
				bath: bath,
				rent: rent,
				bio: bio
			})
			.then(()=>{
				window.location.replace("ViewProfile.html");
			})
			.catch((error)=>{
				alert(error);
			});
		}
	});
  
  </script>
</html>
